# 共识文档：无限背景系统 (Infinite Background System)

## 1. 需求共识
- **核心目标**：实现基于 SpriteRenderer 的多层视差无限背景系统。
- **输入**：用户仅提供远景背景图片，但架构需支持多层。
- **交互**：
    - 背景随玩家（摄像机）移动而产生视差滚动。
    - 支持 X 轴无限循环。
    - 支持 Y 轴跟随（带视差）。
    - 支持通过配置切换主题。

## 2. 关键决策
- **渲染方案**：使用 **SpriteRenderer**，废弃原有的 WorldSpace Canvas 方案。
- **视差支持**：架构上支持 **多层视差 (Multi-Layer Parallax)**。虽然目前只有远景图，但代码需预留中景/前景层级能力。
- **Y 轴行为**：背景将跟随摄像机 Y 轴移动，并应用垂直视差系数（通常远景移动较慢）。

## 3. 技术约束
- **组件结构**：
    - `InfiniteBackgroundManager`：总控，挂载在摄像机或独立空对象上。
    - `ParallaxLayer`：每一层背景的控制器。
- **资源管理**：使用 `ScriptableObject` 管理背景主题和图层配置。
- **无限机制**：每层使用 3 张 Sprite 拼接（Left, Center, Right），基于摄像机位置动态重排 (Re-positioning)。

## 4. 验收标准
- [ ] 运行场景时，背景能够正确显示。
- [ ] 摄像机水平移动时，背景产生视差滚动且无限循环。
- [ ] 摄像机垂直移动时，背景产生视差跟随。
- [ ] 当背景移出视野时，自动瞬移到另一侧拼接，无视觉缝隙。
- [ ] 代码结构清晰，可通过 ScriptableObject 配置层级参数。
